import {Component, Inject, OnInit} from '@angular/core';
import {MatDialog, MatDialogRef, MAT_DIALOG_DATA} from '@angular/material';
import { ImportDialogComponent } from '../import-dialog/import-dialog.component';
import { SpriteImporter } from '../sprite-importer';
import { SpriteStoreService } from '../sprite-store.service';
import { Sprite } from '../sprite';
import { ExportDialogComponent } from '../export-dialog/export-dialog.component';

@Component({
  selector: 'app-sprite-picker',
  templateUrl: './sprite-picker.component.html',
  styleUrls: ['./sprite-picker.component.scss']
})
export class SpritePickerComponent implements OnInit {

  constructor(public dialog: MatDialog, private spriteStoreService: SpriteStoreService) { 
    spriteStoreService.data.subscribe((data) => {
        this.sprites = data;
    });
  }

  private sprites: Sprite[];

  private importData = '';

  ngOnInit() {
    this.initializeImportData();
  }


  public import() {
    const dialogRef = this.dialog.open(ImportDialogComponent, {
      width: '700px',
      height: '400px',
      data: {text: this.importData}
    });

    dialogRef.afterClosed().subscribe(result => {

      const importer = new SpriteImporter();
      const sprites = importer.import(result);
      this.spriteStoreService.add(sprites);
    });
  }

  public export() {
    const dialogRef = this.dialog.open(ExportDialogComponent, {
      width: '700px',
      height: '400px'
    });

  }

  initializeImportData(): any {

    this.importData=`
    ;
    ; Generated by pixel
    ;
    
    ;
; Generated by pixel
;

fred_climb_1:
    .byte %00000001, %00000000     ; .......#........
    .byte %00011001, %00000000     ; ...##..#........
    .byte %00111101, %00000000     ; ..####.#........
    .byte %10011001, %00000000     ; #..##..#........
    .byte %11111110, %00000000     ; #######.........
    .byte %00111100, %00000000     ; ..####..........
    .byte %00111100, %00000000     ; ..####..........
    .byte %00111100, %00000000     ; ..####..........
    .byte %00111100, %00000000     ; ..####..........
    .byte %00111100, %00000000     ; ..####..........
    .byte %00100010, %00000000     ; ..#...#.........
    .byte %00100010, %00000000     ; ..#...#.........
    .byte %00100010, %00000000     ; ..#...#.........
    .byte %00100000, %00000000     ; ..#.............
    .byte %00100000, %00000000     ; ..#.............
    .byte %00000000, %00000000     ; ................

fred_climb_2:
    .byte %10000000, %00000000     ; #...............
    .byte %10011000, %00000000     ; #..##...........
    .byte %10111100, %00000000     ; #.####..........
    .byte %10011001, %00000000     ; #..##..#........
    .byte %01111111, %00000000     ; .#######........
    .byte %00111100, %00000000     ; ..####..........
    .byte %00111100, %00000000     ; ..####..........
    .byte %00111100, %00000000     ; ..####..........
    .byte %00111100, %00000000     ; ..####..........
    .byte %00111100, %00000000     ; ..####..........
    .byte %01000100, %00000000     ; .#...#..........
    .byte %01000100, %00000000     ; .#...#..........
    .byte %01000100, %00000000     ; .#...#..........
    .byte %00000100, %00000000     ; .....#..........
    .byte %00000100, %00000000     ; .....#..........
    .byte %00000000, %00000000     ; ................

fred_right_1
    .byte %00000110, %00000000     ; .....##.........
    .byte %00111110, %00000000     ; ..#####.........
    .byte %01111100, %00000000     ; .#####..........
    .byte %00110100, %00000000     ; ..##.#..........
    .byte %00111110, %00000000     ; ..#####.........
    .byte %00111100, %00000000     ; ..####..........
    .byte %00011000, %00000000     ; ...##...........
    .byte %00111100, %00000000     ; ..####..........
    .byte %01111110, %00000000     ; .######.........
    .byte %01111110, %00000000     ; .######.........
    .byte %11110111, %00000000     ; ####.###........
    .byte %11111011, %00000000     ; #####.##........
    .byte %00111100, %00000000     ; ..####..........
    .byte %01110110, %00000000     ; .###.##.........
    .byte %01101110, %00000000     ; .##.###.........
    .byte %01110111, %00000000     ; .###.###........

    .byte %00000001, %10000000     ; .......##.......
    .byte %00001111, %10000000     ; ....#####.......
    .byte %00011111, %00000000     ; ...#####........
    .byte %00001101, %00000000     ; ....##.#........
    .byte %00001111, %10000000     ; ....#####.......
    .byte %00001111, %00000000     ; ....####........
    .byte %00000110, %00000000     ; .....##.........
    .byte %00001111, %00000000     ; ....####........
    .byte %00011011, %10000000     ; ...##.###.......
    .byte %00011011, %10000000     ; ...##.###.......
    .byte %00011011, %10000000     ; ...##.###.......
    .byte %00011101, %10000000     ; ...###.##.......
    .byte %00001111, %00000000     ; ....####........
    .byte %00000110, %00000000     ; .....##.........
    .byte %00000110, %00000000     ; .....##.........
    .byte %00000111, %00000000     ; .....###........

    .byte %00000000, %01100000     ; .........##.....
    .byte %00000011, %11100000     ; ......#####.....
    .byte %00000111, %11000000     ; .....#####......
    .byte %00000011, %01000000     ; ......##.#......
    .byte %00000011, %11100000     ; ......#####.....
    .byte %00000011, %11000000     ; ......####......
    .byte %00000001, %10000000     ; .......##.......
    .byte %00000011, %11000000     ; ......####......
    .byte %00000111, %11100000     ; .....######.....
    .byte %00000111, %11100000     ; .....######.....
    .byte %00001111, %01110000     ; ....####.###....
    .byte %00001111, %10110000     ; ....#####.##....
    .byte %00000011, %11000000     ; ......####......
    .byte %00000111, %01100000     ; .....###.##.....
    .byte %00000110, %11100000     ; .....##.###.....
    .byte %00000111, %01110000     ; .....###.###....

    .byte %00000000, %00011000     ; ...........##...
    .byte %00000000, %11111000     ; ........#####...
    .byte %00000001, %11110000     ; .......#####....
    .byte %00000000, %11010000     ; ........##.#....
    .byte %00000000, %11111000     ; ........#####...
    .byte %00000000, %11110000     ; ........####....
    .byte %00000000, %01100000     ; .........##.....
    .byte %00000000, %11110000     ; ........####....
    .byte %00000001, %11111000     ; .......######...
    .byte %00000011, %11111100     ; ......########..
    .byte %00000111, %11111110     ; .....##########.
    .byte %00000110, %11110110     ; .....##.####.##.
    .byte %00000000, %11111000     ; ........#####...
    .byte %00000001, %11011010     ; .......###.##.#.
    .byte %00000011, %00001110     ; ......##....###.
    .byte %00000011, %10000100     ; ......###....#..

fred_left_1:
    .byte %00011000, %00000000     ; ...##...........
    .byte %00011111, %00000000     ; ...#####........
    .byte %00001111, %10000000     ; ....#####.......
    .byte %00001011, %00000000     ; ....#.##........
    .byte %00011111, %00000000     ; ...#####........
    .byte %00001111, %00000000     ; ....####........
    .byte %00000110, %00000000     ; .....##.........
    .byte %00001111, %00000000     ; ....####........
    .byte %00011111, %10000000     ; ...######.......
    .byte %00111111, %11000000     ; ..########......
    .byte %01111111, %11100000     ; .##########.....
    .byte %01101111, %01100000     ; .##.####.##.....
    .byte %00011111, %00000000     ; ...#####........
    .byte %01011011, %10000000     ; .#.##.###.......
    .byte %01110000, %11000000     ; .###....##......
    .byte %00100001, %11000000     ; ..#....###......

    .byte %00000110, %00000000     ; .....##.........
    .byte %00000111, %11000000     ; .....#####......
    .byte %00000011, %11100000     ; ......#####.....
    .byte %00000010, %11000000     ; ......#.##......
    .byte %00000111, %11000000     ; .....#####......
    .byte %00000011, %11000000     ; ......####......
    .byte %00000001, %10000000     ; .......##.......
    .byte %00000011, %11000000     ; ......####......
    .byte %00000111, %11100000     ; .....######.....
    .byte %00000111, %11100000     ; .....######.....
    .byte %00001110, %11110000     ; ....###.####....
    .byte %00001101, %11110000     ; ....##.#####....
    .byte %00000011, %11000000     ; ......####......
    .byte %00000110, %11100000     ; .....##.###.....
    .byte %00000111, %01100000     ; .....###.##.....
    .byte %00001110, %11100000     ; ....###.###.....

    .byte %00000001, %10000000     ; .......##.......
    .byte %00000001, %11110000     ; .......#####....
    .byte %00000000, %11111000     ; ........#####...
    .byte %00000000, %10110000     ; ........#.##....
    .byte %00000001, %11110000     ; .......#####....
    .byte %00000000, %11110000     ; ........####....
    .byte %00000000, %01100000     ; .........##.....
    .byte %00000000, %11110000     ; ........####....
    .byte %00000001, %11111000     ; .......######...
    .byte %00000001, %11011000     ; .......###.##...
    .byte %00000001, %11011000     ; .......###.##...
    .byte %00000001, %10111000     ; .......##.###...
    .byte %00000000, %11110000     ; ........####....
    .byte %00000000, %01100000     ; .........##.....
    .byte %00000000, %01100000     ; .........##.....
    .byte %00000000, %11100000     ; ........###.....

    .byte %00000000, %01100000     ; .........##.....
    .byte %00000000, %01111100     ; .........#####..
    .byte %00000000, %00111110     ; ..........#####.
    .byte %00000000, %00101100     ; ..........#.##..
    .byte %00000000, %01111100     ; .........#####..
    .byte %00000000, %00111100     ; ..........####..
    .byte %00000000, %00011000     ; ...........##...
    .byte %00000000, %00111100     ; ..........####..
    .byte %00000000, %01111110     ; .........######.
    .byte %00000000, %01111110     ; .........######.
    .byte %00000000, %11101111     ; ........###.####
    .byte %00000000, %11011111     ; ........##.#####
    .byte %00000000, %00111100     ; ..........####..
    .byte %00000000, %01101110     ; .........##.###.
    .byte %00000000, %01110110     ; .........###.##.
    .byte %00000000, %11101110     ; ........###.###.

fred_carry_right_1:
    .byte %00000000, %00000000     ; ................
    .byte %00000000, %00000000     ; ................
    .byte %00111000, %00000000     ; ..###...........
    .byte %01111100, %00000000     ; .#####..........
    .byte %00111000, %00000000     ; ..###...........
    .byte %00011100, %00000000     ; ...###..........
    .byte %01111110, %00000000     ; .######.........
    .byte %11111101, %00000000     ; ######.#........
    .byte %11111010, %00000000     ; #####.#.........
    .byte %11011000, %00000000     ; ##.##...........
    .byte %10111000, %00000000     ; #.###...........
    .byte %00101000, %00000000     ; ..#.#...........
    .byte %00100100, %00000000     ; ..#..#..........
    .byte %01000100, %00000000     ; .#...#..........
    .byte %01000011, %10000000     ; .#....###.......
    .byte %01110000, %00000000     ; .###............

    .byte %00000000, %00000000     ; ................
    .byte %00000000, %00000000     ; ................
    .byte %00000111, %00000000     ; .....###........
    .byte %00001111, %10000000     ; ....#####.......
    .byte %00000111, %00000000     ; .....###........
    .byte %00000010, %11000000     ; ......#.##......
    .byte %00000111, %11100000     ; .....######.....
    .byte %00011110, %01000000     ; ...####..#......
    .byte %00111110, %10000000     ; ..#####.#.......
    .byte %00111111, %10000000     ; ..#######.......
    .byte %00110111, %10000000     ; ..##.####.......
    .byte %00100011, %00000000     ; ..#...##........
    .byte %00000010, %00000000     ; ......#.........
    .byte %00000010, %00000000     ; ......#.........
    .byte %00000010, %00000000     ; ......#.........
    .byte %00000011, %10000000     ; ......###.......

    .byte %00000000, %00000000     ; ................
    .byte %00000000, %00000000     ; ................
    .byte %00000011, %10000000     ; ......###.......
    .byte %00000111, %11000000     ; .....#####......
    .byte %00000011, %10000000     ; ......###.......
    .byte %00000001, %11000000     ; .......###......
    .byte %00000111, %11110000     ; .....#######....
    .byte %00001111, %01100000     ; ....####.##.....
    .byte %00011111, %11000000     ; ...#######......
    .byte %00011011, %11000000     ; ...##.####......
    .byte %00011001, %11000000     ; ...##..###......
    .byte %00000001, %01000000     ; .......#.#......
    .byte %00000001, %01000000     ; .......#.#......
    .byte %00000010, %00100000     ; ......#...#.....
    .byte %00000010, %00011100     ; ......#....###..
    .byte %00000011, %10000000     ; ......###.......

    .byte %00000000, %00000000     ; ................
    .byte %00000000, %00000000     ; ................
    .byte %00000000, %01110000     ; .........###....
    .byte %00000000, %11111000     ; ........#####...
    .byte %00000000, %01110000     ; .........###....
    .byte %00000000, %00111100     ; ..........####..
    .byte %00000000, %01111100     ; .........#####..
    .byte %00000011, %11011100     ; ......####.###..
    .byte %00000111, %11011000     ; .....#####.##...
    .byte %00000110, %11011000     ; .....##.##.##...
    .byte %00000110, %11011000     ; .....##.##.##...
    .byte %00000010, %01110000     ; ......#..###....
    .byte %00000000, %00100000     ; ..........#.....
    .byte %00000000, %00100000     ; ..........#.....
    .byte %00000000, %00100000     ; ..........#.....
    .byte %00000000, %00111000     ; ..........###...

fred_carry_left_1:
    .byte %00000000, %00000000     ; ................
    .byte %00000000, %00000000     ; ................
    .byte %00000000, %00011100     ; ...........###..
    .byte %00000000, %00111110     ; ..........#####.
    .byte %00000000, %00011100     ; ...........###..
    .byte %00000000, %00001000     ; ............#...
    .byte %00000000, %01111110     ; .........######.
    .byte %00000000, %01010110     ; .........#.#.##.
    .byte %00000000, %00100111     ; ..........#..###
    .byte %00000000, %00011111     ; ...........#####
    .byte %00000000, %00011101     ; ...........###.#
    .byte %00000000, %00010100     ; ...........#.#..
    .byte %00000000, %00100100     ; ..........#..#..
    .byte %00000000, %00100010     ; ..........#...#.
    .byte %00000000, %11000010     ; ........##....#.
    .byte %00000000, %00001110     ; ............###.

    .byte %00000000, %00000000     ; ................
    .byte %00000000, %00000000     ; ................
    .byte %00000000, %11100000     ; ........###.....
    .byte %00000001, %11110000     ; .......#####....
    .byte %00000000, %11100000     ; ........###.....
    .byte %00000000, %01000000     ; .........#......
    .byte %00000011, %11000000     ; ......####......
    .byte %00000111, %01111000     ; .....###.####...
    .byte %00000011, %01111000     ; ......##.####...
    .byte %00000001, %11111000     ; .......######...
    .byte %00000001, %11011000     ; .......###.##...
    .byte %00000001, %11001000     ; .......###..#...
    .byte %00000000, %01000000     ; .........#......
    .byte %00000000, %01000000     ; .........#......
    .byte %00000000, %01000000     ; .........#......
    .byte %00000001, %11000000     ; .......###......

    .byte %00000000, %00000000     ; ................
    .byte %00000000, %00000000     ; ................
    .byte %00000001, %11000000     ; .......###......
    .byte %00000011, %11100000     ; ......#####.....
    .byte %00000001, %11000000     ; .......###......
    .byte %00000000, %10000000     ; ........#.......
    .byte %00000001, %10000000     ; .......##.......
    .byte %00000011, %11000000     ; ......####......
    .byte %00000111, %11100000     ; .....######.....
    .byte %00000101, %11100000     ; .....#.####.....
    .byte %00000011, %11100000     ; ......#####.....
    .byte %00000010, %10100000     ; ......#.#.#.....
    .byte %00000010, %10000000     ; ......#.#.......
    .byte %00000100, %01000000     ; .....#...#......
    .byte %00111000, %01000000     ; ..###....#......
    .byte %00000001, %11000000     ; .......###......

    .byte %00000000, %00000000     ; ................
    .byte %00000000, %00000000     ; ................
    .byte %00001110, %00000000     ; ....###.........
    .byte %00011111, %00000000     ; ...#####........
    .byte %00001110, %00000000     ; ....###.........
    .byte %00011100, %00000000     ; ...###..........
    .byte %00111111, %00000000     ; ..######........
    .byte %00111011, %10000000     ; ..###.###.......
    .byte %00011011, %11000000     ; ...##.####......
    .byte %00011011, %11000000     ; ...##.####......
    .byte %00011011, %11000000     ; ...##.####......
    .byte %00001110, %01000000     ; ....###..#......
    .byte %00000100, %00000000     ; .....#..........
    .byte %00000100, %00000000     ; .....#..........
    .byte %00000100, %00000000     ; .....#..........
    .byte %00011100, %00000000     ; ...###..........

ambulance_1:
    .byte %00000000, %00000000     ; ................
    .byte %00000000, %00000000     ; ................
    .byte %00111111, %11111111     ; ..##############
    .byte %01000000, %00000000     ; .#..............
    .byte %10000000, %00000000     ; #...............
    .byte %10000000, %00000000     ; #...............
    .byte %10000000, %00000000     ; #...............
    .byte %10000000, %00000000     ; #...............
    .byte %10000000, %00000000     ; #...............
    .byte %10000000, %00000000     ; #...............
    .byte %10000000, %00000000     ; #...............
    .byte %10000000, %00000000     ; #...............
    .byte %01000011, %00000000     ; .#....##........
    .byte %00110110, %10111111     ; ..##.##.#.######
    .byte %00000101, %10000000     ; .....#.##.......
    .byte %00000011, %00000000     ; ......##........

    .byte %00000000, %00000000     ; ................
    .byte %00000000, %00000000     ; ................
    .byte %00001111, %11111111     ; ....############
    .byte %00010000, %00000000     ; ...#............
    .byte %00100000, %00000000     ; ..#.............
    .byte %00100000, %00000000     ; ..#.............
    .byte %00100000, %00000000     ; ..#.............
    .byte %00100000, %00000000     ; ..#.............
    .byte %00100000, %00000000     ; ..#.............
    .byte %00100000, %00000000     ; ..#.............
    .byte %00100000, %00000000     ; ..#.............
    .byte %00100000, %00000000     ; ..#.............
    .byte %00010000, %11000000     ; ...#....##......
    .byte %00001101, %01101111     ; ....##.#.##.####
    .byte %00000001, %10100000     ; .......##.#.....
    .byte %00000000, %11000000     ; ........##......

    .byte %00000000, %00000000     ; ................
    .byte %00000000, %00000000     ; ................
    .byte %00000011, %11111111     ; ......##########
    .byte %00000100, %00000000     ; .....#..........
    .byte %00001000, %00000000     ; ....#...........
    .byte %00001000, %00000000     ; ....#...........
    .byte %00001000, %00000000     ; ....#...........
    .byte %00001000, %00000000     ; ....#...........
    .byte %00001000, %00000000     ; ....#...........
    .byte %00001000, %00000000     ; ....#...........
    .byte %00001000, %00000000     ; ....#...........
    .byte %00001000, %00000000     ; ....#...........
    .byte %00000100, %00110000     ; .....#....##....
    .byte %00000011, %01101011     ; ......##.##.#.##
    .byte %00000000, %01011000     ; .........#.##...
    .byte %00000000, %00110000     ; ..........##....

    .byte %00000000, %00000000     ; ................
    .byte %00000000, %00000000     ; ................
    .byte %00000000, %11111111     ; ........########
    .byte %00000001, %00000000     ; .......#........
    .byte %00000010, %00000000     ; ......#.........
    .byte %00000010, %00000000     ; ......#.........
    .byte %00000010, %00000000     ; ......#.........
    .byte %00000010, %00000000     ; ......#.........
    .byte %00000010, %00000000     ; ......#.........
    .byte %00000010, %00000000     ; ......#.........
    .byte %00000010, %00000000     ; ......#.........
    .byte %00000010, %00000000     ; ......#.........
    .byte %00000001, %00001100     ; .......#....##..
    .byte %00000000, %11010110     ; ........##.#.##.
    .byte %00000000, %00011010     ; ...........##.#.
    .byte %00000000, %00001100     ; ............##..

ambulance_2:
    .byte %00000000, %00000000     ; ................
    .byte %00000000, %00000000     ; ................
    .byte %10000000, %00000000     ; #...............
    .byte %01000000, %00000000     ; .#..............
    .byte %00100000, %00000000     ; ..#.............
    .byte %00010000, %00000000     ; ...#............
    .byte %00001000, %00000000     ; ....#...........
    .byte %00000110, %00000000     ; .....##.........
    .byte %00000001, %00000000     ; .......#........
    .byte %00000001, %00000000     ; .......#........
    .byte %00000001, %00000000     ; .......#........
    .byte %00000001, %00000000     ; .......#........
    .byte %00110001, %00000000     ; ..##...#........
    .byte %01101010, %00000000     ; .##.#.#.........
    .byte %01011000, %00000000     ; .#.##...........
    .byte %00110000, %00000000     ; ..##............

    .byte %00000000, %00000000     ; ................
    .byte %00000000, %00000000     ; ................
    .byte %11100000, %00000000     ; ###.............
    .byte %00010000, %00000000     ; ...#............
    .byte %00001000, %00000000     ; ....#...........
    .byte %00000100, %00000000     ; .....#..........
    .byte %00000010, %00000000     ; ......#.........
    .byte %00000001, %10000000     ; .......##.......
    .byte %00000000, %01000000     ; .........#......
    .byte %00000000, %01000000     ; .........#......
    .byte %00000000, %01000000     ; .........#......
    .byte %00000000, %01000000     ; .........#......
    .byte %00001100, %01000000     ; ....##...#......
    .byte %11010110, %10000000     ; ##.#.##.#.......
    .byte %00011010, %00000000     ; ...##.#.........
    .byte %00001100, %00000000     ; ....##..........

    .byte %00000000, %00000000     ; ................
    .byte %00000000, %00000000     ; ................
    .byte %11111000, %00000000     ; #####...........
    .byte %00000100, %00000000     ; .....#..........
    .byte %00000010, %00000000     ; ......#.........
    .byte %00000001, %00000000     ; .......#........
    .byte %00000000, %10000000     ; ........#.......
    .byte %00000000, %01100000     ; .........##.....
    .byte %00000000, %00010000     ; ...........#....
    .byte %00000000, %00010000     ; ...........#....
    .byte %00000000, %00010000     ; ...........#....
    .byte %00000000, %00010000     ; ...........#....
    .byte %00000011, %00010000     ; ......##...#....
    .byte %11110110, %10100000     ; ####.##.#.#.....
    .byte %00000101, %10000000     ; .....#.##.......
    .byte %00000011, %00000000     ; ......##........

    .byte %00000000, %00000000     ; ................
    .byte %00000000, %00000000     ; ................
    .byte %11111110, %00000000     ; #######.........
    .byte %00000001, %00000000     ; .......#........
    .byte %00000000, %10000000     ; ........#.......
    .byte %00000000, %01000000     ; .........#......
    .byte %00000000, %00100000     ; ..........#.....
    .byte %00000000, %00011000     ; ...........##...
    .byte %00000000, %00000100     ; .............#..
    .byte %00000000, %00000100     ; .............#..
    .byte %00000000, %00000100     ; .............#..
    .byte %00000000, %00000100     ; .............#..
    .byte %00000000, %11000100     ; ........##...#..
    .byte %11111101, %01101000     ; ######.#.##.#...
    .byte %00000001, %10100000     ; .......##.#.....
    .byte %00000000, %11000000     ; ........##......


`;


  }
 

}
